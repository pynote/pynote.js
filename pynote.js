const VERSION="1.0.0",ALL_PACKAGES=new Set,ALL_FILES=new Set;let workerIsReady=!1;const LOADER_GIF="data:image/gif;base64,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";(async()=>{const e=Array.from(document.querySelectorAll("pynote")),t=new FormData,n=[];t.append("version","1.0.0"),e.forEach(((e,s)=>{const r=e.getAttribute("packages")??"";r.split(",").map((e=>e.trim())).filter(Boolean).forEach((e=>ALL_PACKAGES.add(e)));const o=e.getAttribute("files")??"";o.split(/[\n,;]/).map((e=>e.trim())).filter(Boolean).forEach((e=>ALL_FILES.add(e))),t.append(`notes[${s}][src]`,e.getAttribute("src")??""),t.append(`notes[${s}][packages]`,r),t.append(`notes[${s}][files]`,o),t.append(`notes[${s}][code]`,e.textContent.trim()),t.append(`notes[${s}][readonly]`,e.getAttribute("readonly")??"");const i=document.createElement("div");i.innerHTML=`\n      <div style="text-align:center;padding:10px;">\n        <img src="${LOADER_GIF}" width="28" />\n      </div>\n    `,e.replaceWith(i),n[s]=i}));try{const s=await fetch("https://getpynote.net/pynote.php",{method:"POST",body:t});if(!s.ok)throw new Error(`HTTP ${s.status}`);const{html:r}=await s.json();if(!Array.isArray(r)||r.length!==e.length)throw new Error("R√©ponse inattendue du serveur");r.forEach(((e,t)=>{const s=document.createElement("div");s.className="pynote-result",s.setAttribute("data-from","pynote"),s.innerHTML=e,n[t].replaceWith(s)})),"function"==typeof initEditors&&initEditors(),"function"==typeof initializeEditors&&initializeEditors(),await typesetMathIn(document),await highlightIn(document),document.dispatchEvent(new CustomEvent("pynote:rendered"))}catch(e){n.forEach((t=>{const n=document.createElement("div");n.className="pynote-error",n.textContent=`Erreur de chargement: ${e.message}`,t.replaceWith(n)}))}})();const s=document.createElement("style");s.textContent="\n.hljs {border-radius:4px;border:1px solid silver;}\n",document.head.appendChild(s);import ace from"https://cdn.jsdelivr.net/npm/ace-builds@1.43.4/+esm";function setRunVisible(e,t){e&&("disabled"==t&&(e.style.display="block",e.classList.add("is-disabled"),e.style.pointerEvents="none",e.style.opacity="0.5",e.setAttribute("aria-disabled","true")),"visible"==t&&(e.style.display="block",e.classList.remove("is-disabled"),e.style.pointerEvents="",e.style.opacity="",e.removeAttribute("aria-disabled")),"hidden"==t&&(e.style.display="none"))}function setRestartVisible(e,t){e&&(e.style.display=t?"":"none")}function setSpinVisible(e,t){e&&(e.style.display=t?"":"none")}ace.config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds@1.43.4/src-min-noconflict/");const editor_code=Object.create(null);function getUidFromEditorId(e){return e?.startsWith("code_editor_")?e.slice(12):e}function initEditors(){document.querySelectorAll(".code-editor").forEach((e=>{const t=getUidFromEditorId(e.id);if(editor_code[t]?.destroy)try{editor_code[t].destroy()}catch{}const n=ace.edit(e);n.setOptions({theme:"ace/theme/one_dark",mode:"ace/mode/python",maxLines:500,minLines:1,fontSize:14,wrap:!0,useWorker:!1}),n.container.style.lineHeight=1.5;const s="1"===e.dataset.readonly;n.setReadOnly(s),editor_code[t]=n}))}function initializeEditors(){document.querySelectorAll(".code-editor").forEach((e=>{const t=getUidFromEditorId(e.id),n=document.getElementById("run_"+t),s=document.getElementById("restart_"+t),r=document.getElementById("spin_"+t);workerIsReady?(n&&setRunVisible(n,"visible"),s&&setRestartVisible(s,!1),r&&setSpinVisible(r,!1)):(n&&setRunVisible(n,"hidden"),s&&setRestartVisible(s,!1),r&&setSpinVisible(r,!0))}))}function setUIFor(e,{init:t=!1,running:n=!1,completed:s=!1}){const r=document.getElementById(`run_${e}`),o=document.getElementById(`restart_${e}`),i=document.getElementById(`spin_${e}`);return t?(setSpinVisible(i,!1),setRunVisible(r,"visible"),void setRestartVisible(o,!1)):n?(setRunVisible(r,"hidden"),void setRestartVisible(o,!0)):s?(setRunVisible(r,"visible"),void setRestartVisible(o,!1)):void 0}function updateEditors(e,t=null){const n=Array.from(document.querySelectorAll(".code-editor")).map((e=>getUidFromEditorId(e.id)));if("init"!==e)if("completed"!==e){if("running"===e){for(const e of n)setRunVisible(document.getElementById(`run_${e}`),"disabled"),setRestartVisible(document.getElementById(`restart_${e}`),!1);null!=t&&setUIFor(t,{running:!0})}}else for(const e of n)setUIFor(e,{completed:!0});else for(const e of n)setUIFor(e,{init:!0})}function guessMime(e){return{txt:"text/plain;charset=utf-8",md:"text/markdown;charset=utf-8",csv:"text/csv;charset=utf-8",json:"application/json",pdf:"application/pdf",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",webp:"image/webp",svg:"image/svg+xml",wav:"audio/wav",mp3:"audio/mpeg",ogg:"audio/ogg",mp4:"video/mp4",webm:"video/webm",py:"text/plain;charset=utf-8",html:"text/html;charset=utf-8",css:"text/plain;charset=utf-8",js:"text/plain;charset=utf-8",zip:"application/zip"}[(e.split(".").pop()||"").toLowerCase()]||"application/octet-stream"}function normalizeInlineMime(e,t){const n=(t.split(".").pop()||"").toLowerCase();return new Set(["py","js","ts","css","md","csv","tsv","log","ipynb"]).has(n)?"text/plain;charset=utf-8":"json"===n?"application/json":"svg"===n?"image/svg+xml":e||"application/octet-stream"}function canOpenInline(e,t=""){const n=(e||"").toLowerCase(),s=(t.split(".").pop()||"").toLowerCase(),r=new Set(["md","csv","tsv","log","py","js","ts","css","html","htm","svg","ipynb","json","txt"]);return[/^text\//,/^image\//,/^audio\//,/^video\//,/^application\/pdf$/,/^application\/json$/,/^application\/xml$/,/^image\/svg\+xml$/].some((e=>e.test(n)))||r.has(s)}function saveOrOpenBuffer(e,t,n){const s=normalizeInlineMime(n||guessMime(t),t),r=new Blob([e],{type:s}),o=URL.createObjectURL(r);if(canOpenInline(s,t)){const e=document.createElement("a");return e.href=o,e.target="_blank",e.rel="noopener",document.body.appendChild(e),e.click(),e.remove(),void setTimeout((()=>URL.revokeObjectURL(o)),6e4)}const i=document.createElement("a");i.href=o,i.download=t||"fichier",document.body.appendChild(i),i.click(),i.remove(),setTimeout((()=>URL.revokeObjectURL(o)),0)}function requestFileFromWorker(e,t,{timeoutMs:n=3e4}={}){return new Promise(((s,r)=>{const o="rf_"+Math.random().toString(36).slice(2);let i=null;const a=t=>{const n=t.data||{};if("fs.readFile.result"===n.type&&n.id===o){if(e.removeEventListener("message",a),i&&clearTimeout(i),n.error)return r(new Error(n.error));s({buffer:n.buffer,path:n.path,mime:n.mime})}};e.addEventListener("message",a),i=setTimeout((()=>{e.removeEventListener("message",a),r(new Error(`Timeout lecture worker pour ${t}`))}),n),e.postMessage({cmd:"readFile",id:o,path:t})}))}function setupFsDownloadDelegation(e,t){e&&t&&(e._fsDlBound||(e._fsDlBound=!0,e.addEventListener("click",(async e=>{const n=e.target.closest("a.fs-download");if(!n)return;e.preventDefault();const s=n.getAttribute("data-path"),r=s.split("/").pop()||"fichier";try{const{buffer:e,mime:n}=await requestFileFromWorker(t,s);saveOrOpenBuffer(e,r,n)}catch(e){console.error(e),alert(`Impossible de t√©l√©charger ${r} : ${e.message||e}`)}}))))}function formatBytes(e){if(null==e)return"";const t=["octets","Ko","Mo","Go","To"];let n=0,s=e;for(;s>=1024&&n<t.length-1;)s/=1024,n++;return(0===n?s:s.toFixed(1))+" "+t[n]}function renderFsListing(e){const t=document.querySelectorAll(".pyodide_fs_block");if(!t.length)return;const n=e.path||"/",s=(e.items||[]).map((e=>{if("string"==typeof e){return{name:e,path:(n.endsWith("/")?n:n+"/")+e,kind:"file",size:null}}return e}));t.forEach((t=>{const n=t.querySelector(".pyodide_fs");if(!n)return;const r=(t.getAttribute("data-files")||"").split(/[\n,;]/).map((e=>e.trim())).filter(Boolean);if(!r.length)return t.style.display="none",void(n.textContent="");if(e.error)return t.style.display="block",void(n.textContent=`Erreur FS (${e.path}) : ${e.error}`);const o=new Set(r.map((e=>e.split("/").pop()||e))),i=s.filter((e=>{const t=e.name||(e.path?e.path.split("/").pop():"");return o.has(t)}));if(!i.length)return t.style.display="none",void(n.textContent="");const a=i.slice().sort(((e,t)=>e.kind===t.kind?e.name.localeCompare(t.name):"dir"===e.kind?-1:1)).map((({name:e,path:t,kind:n,size:s})=>{if("dir"===n)return`üìÅ <span>${e}</span>`;return`<span style="vertical-align:-2px">‚ñ™ </span><a href="#" class="fs-download" data-path="${t}">${e}</a>${null!=s?` <span class="opacity-50 small" style="vertical-align:1px;">(${formatBytes(s)})</span>`:""}`})).join("\n");t.style.display="block",n.innerHTML=a,setupFsDownloadDelegation(t,pyodideWorker)}))}const workerCode="\n\nself.importScripts('https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js');\n\nvar globals_keys = [];\n\n\nvar installedPackages = new Set();\n\n\nfunction filenameFromUrl(url) {\n  try {\n    const u = new URL(url, self.location.href);\n    const base = u.pathname.split('/').pop() || 'fichier';\n    return decodeURIComponent(base);\n  } catch {\n    return (url.split('?')[0].split('/').pop() || 'fichier');\n  }\n}\n\n\nfunction ensureDir(path) {\n  const parts = path.split('/').filter(Boolean);\n  let cur = '';\n  for (const p of parts) {\n    cur += '/' + p;\n    try { self.pyodide.FS.mkdir(cur); } catch {}\n  }\n}\n\n\nasync function putUrls(urls, dir = '/home/pyodide') {\n  const results = [];\n  ensureDir(dir.replace(/\\/+$/,''));\n  for (const url of urls) {\n    const name = filenameFromUrl(url);\n    const dest = (dir.replace(/\\/+$/,'') + '/' + name).replace(/\\/+/g, '/');\n    try {\n      const res = await fetch(url, { mode: 'cors' });\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      const bytes = new Uint8Array(await res.arrayBuffer());\n      self.pyodide.FS.writeFile(dest, bytes);\n      results.push({ url, path: dest, ok: true, size: bytes.length });\n    } catch (e) {\n      results.push({ url, path: dest, ok: false, error: String(e?.message || e) });\n    }\n  }\n  return results;\n}\n\n\nasync function main() {\n  self.pyodide = await loadPyodide();\n  for (const key of self.pyodide.globals.keys()) {\n    globals_keys.push(key);\n  }\n  self.postMessage({ init: true });\n}\nlet pyodideReadyPromise = main();\n\n\nself.onmessage = async (event) => {\n  const data = event.data || {};\n  const code = data.code;\n  const bibliotheques = data.bibliotheques;\n  const scope = data.scope;\n  const id = data.id;\n\n  await pyodideReadyPromise;\n\n\n  if (data.cmd === 'putUrls') {\n    try {\n      const dir = data.dir || '/home/pyodide';\n      const urls = Array.isArray(data.urls) ? data.urls : [];\n      const results = await putUrls(urls, dir);\n      self.postMessage({ putUrls: { dir, results } });\n    } catch (e) {\n      self.postMessage({ putUrls: { error: String(e?.message || e) } });\n    }\n    return;\n  }\n\n\n  if (data.cmd === 'ls') {\n    try {\n      const p = data.path || '/';\n      const names = self.pyodide.FS.readdir(p).filter(n => n !== '.' && n !== '..');\n      const items = names.map((name) => {\n        const full = (p.endsWith('/') ? p : p + '/') + name;\n        let st = null;\n        try { st = self.pyodide.FS.stat(full); } catch {}\n        const isDir = st ? self.pyodide.FS.isDir(st.mode) : false;\n        const size  = (!isDir && st) ? st.size : null;\n        return { name, path: full, kind: isDir ? 'dir' : 'file', size };\n      });\n      self.postMessage({ fs: { path: p, items } });\n    } catch (err) {\n      self.postMessage({ fs: { path: data.path || '/', items: [], error: String(err && err.message ? err.message : err) }});\n    }\n    return;\n  }\n\n\n  if (data.cmd === 'readFile') {\n    try {\n      const p = data.path;\n      if (!p) throw new Error('Chemin manquant (path)');\n      const bytes = self.pyodide.FS.readFile(p, { encoding: 'binary' });\n      const buffer = bytes.buffer.slice(bytes.byteOffset, bytes.byteOffset + bytes.byteLength);\n      self.postMessage({ type: 'fs.readFile.result', id: data.id, path: p, buffer }, [buffer]);\n    } catch (err) {\n      self.postMessage({ type: 'fs.readFile.result', id: data.id, path: data.path, error: String(err && err.message ? err.message : err) });\n    }\n    return;\n  }\n\n \n  if (data.cmd === 'installPackages') {\n    try {\n      const pkgs = Array.isArray(data.packages) ? data.packages : [];\n      const toInstall = [...new Set(pkgs)]\n        .map(s => String(s || '').trim())\n        .filter(Boolean)\n        .filter(name => !installedPackages.has(name));\n\n      if (toInstall.length) {\n        await self.pyodide.loadPackage(\"micropip\");\n        const micropip = self.pyodide.pyimport(\"micropip\");\n\n        for (const name of toInstall) {\n          self.postMessage({ type: \"pip_progress\", status: \"installing\", name });\n          try {\n            await micropip.install(name);\n            installedPackages.add(name);\n            self.postMessage({ type: \"pip_progress\", status: \"ok\", name });\n          } catch (e) {\n            self.postMessage({\n              type: \"pip_progress\",\n              status: \"error\",\n              name,\n              error: String(e?.message || e)\n            });\n          }\n        }\n      } else {\n   \n        self.postMessage({ type: \"pip_progress\", status: \"nothing_to_do\" });\n      }\n    } catch (e) {\n      self.postMessage({\n        type: \"pip_progress\",\n        status: \"fatal\",\n        error: String(e?.message || e)\n      });\n    }\n    return;\n  }\n\n\n  if (scope == 'cell') {\n    const clesASupprimer = [];\n    for (const key of self.pyodide.globals.keys()) {\n      if (!globals_keys.includes(key)) clesASupprimer.push(key);\n    }\n    for (const key of clesASupprimer) {\n      self.pyodide.globals.delete(key);\n    }\n  }\n\n \n  const bibs = Array.isArray(bibliotheques) ? bibliotheques\n              : String(bibliotheques || \"\").split(\",\").map(s => s.trim()).filter(Boolean);\n  const uniqueBibs = [...new Set(bibs)].sort((a,b)=>a.localeCompare(b));\n\n  try {\n    self.postMessage({ status: 'running', id });\n\n  \n    self.pyodide.setStdout({ batched: (str) => {\n      self.postMessage({ output: str + \"\\n\", id });\n    }});\n\n \n    if (uniqueBibs.length) {\n      await self.pyodide.loadPackage(\"micropip\");\n      const micropip = self.pyodide.pyimport(\"micropip\");\n      for (const name of uniqueBibs) {\n        self.postMessage({ type: \"pip_progress\", status: \"installing\", name });\n        const r = await micropip.install(name)\n          .then(() => ({ ok: true }))\n          .catch(e => ({ ok: false, error: String(e?.message || e) }));\n        self.postMessage({ type: \"pip_progress\", status: r.ok ? \"ok\" : \"error\", name, error: r.error });\n      }\n    }\n\n   \n    await self.pyodide.loadPackagesFromImports(code);\n    let output = self.pyodide.runPython(code);\n    if (typeof output !== 'undefined') {\n      self.postMessage({ output: String(output) + \"\\n\", id });\n    }\n\n    self.postMessage({ status: 'completed' });\n\n  } catch (err) {\n   \n    let errors = err.message.split('File \"<exec>\", ');\n    let output_message = \"\";\n    errors.forEach((error) => {\n      if (typeof error !== 'undefined' && !error.includes('Traceback')) {\n        let m = /line (\\d+)/.exec(error);\n        let error_line = m ? m[1] : '?';\n        let error_string = error.replace(/^.*\\n/, '');\n        output_message += (\"Erreur ligne \" + error_line + \"\\n\" + (error_string || '')).trim() + \"\\n\\n\";\n      }\n    });\n    self.postMessage({ output: output_message.trim(), id });\n    self.postMessage({ status: 'completed' });\n  }\n};\n",workerUrl=URL.createObjectURL(new Blob([workerCode],{type:"text/javascript"}));let pyodideWorker=new Worker(workerUrl);function setupWorkerListener(e){e.onmessage=function(t){const n=t.data||{};if("pip_progress"===n.type&&("installing"===n.status?console.log("[Pyodide] Installation de",n.name):"ok"===n.status?console.log("[Pyodide] Install√© :",n.name):"error"===n.status?console.error("[Pyodide] Erreur installation",n.name,":",n.error):console.log("[Pyodide] pip_progress",n)),n.init){workerIsReady=!0,updateEditors("init");const t=Array.from(ALL_PACKAGES);t.length&&e.postMessage({cmd:"installPackages",packages:t});const n=Array.from(ALL_FILES);return n.length&&e.postMessage({cmd:"putUrls",urls:n,dir:"/home/pyodide"}),void e.postMessage({cmd:"ls",path:"/home/pyodide"})}if(n.putUrls)return n.putUrls.error&&console.error("putUrls error:",n.putUrls.error),void e.postMessage({cmd:"ls",path:n.putUrls.dir||"/home/pyodide"});if(n.fs)renderFsListing(n.fs);else{if(n.status)return"running"===n.status&&null!=n.id&&updateEditors("running",n.id),void("completed"===n.status&&(updateEditors("completed"),setTimeout((()=>{e.postMessage({cmd:"ls",path:"/home/pyodide"})}),0)));if("output"in n&&null!=n.id){const e=document.getElementById("output_"+n.id);e&&(e.innerHTML+=n.output)}}}}setupWorkerListener(pyodideWorker);const scope="session";function run(e){const t=editor_code[e];if(!t)return void console.warn("√âditeur introuvable pour",e);const n=t.getValue(),s=document.querySelector(`#output_${e}`);s&&(s.textContent=""),updateEditors("running",e),pyodideWorker.postMessage({code:n,id:e,scope:scope,bibliotheques:[]})}function restart(e){pyodideWorker&&(pyodideWorker.terminate(),console.log("Web Worker supprim√©.")),workerIsReady=!1;try{pyodideWorker=new Worker(workerUrl),console.log("Web Worker red√©marr√©.");document.querySelectorAll('[id^="output_"]').forEach((e=>{}));document.querySelectorAll('[id^="spin_"]').forEach((e=>{setSpinVisible(e,!0)}));document.querySelectorAll('[id^="restart_"]').forEach((e=>{setRestartVisible(e,!1)}));document.querySelectorAll('[id^="run_"]').forEach((e=>{setRunVisible(e,"hidden")})),setupWorkerListener(pyodideWorker)}catch(t){console.error("√âchec red√©marrage worker:",t);const n=document.querySelector(`#output_${e}`);return void(n&&(n.textContent+=`\n[Erreur red√©marrage] ${t}\n`))}}window.restart=function(){const e=document.activeElement,t=e?.closest?.('div[id^="restart_"]');if(!t)return;restart(t.id.slice(8))},document.addEventListener("click",(e=>{const t=e.target.closest('div[id^="run_"]');if(t){return void run(t.id.slice(4))}const n=e.target.closest('div[id^="restart_"]');if(n){restart(n.id.slice(8))}}));let mathJaxReadyPromise=null;function ensureMathJax(){return mathJaxReadyPromise||(window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"]]},svg:{fontCache:"global"}},mathJaxReadyPromise=import("https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js")),mathJaxReadyPromise}async function typesetMathIn(e=document){if(await ensureMathJax(),window.MathJax?.typesetPromise){const t=Array.from(e.querySelectorAll("div.pynote_text"));if(!t.length)return;try{await window.MathJax.typesetPromise(t)}catch(e){console.log("Erreur de rendu MathJax : ",e)}}}const DEFAULT_HLJS_CSS="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/atom-one-light.min.css";function ensureHighlightCss(e=DEFAULT_HLJS_CSS){if(document.querySelector('link[data-pynote-hljs], link[data-hljs-theme], link[href*="highlight.js"], link[href*="highlightjs"]'))return;const t=document.createElement("link");t.rel="stylesheet",t.href=e,t.setAttribute("data-pynote-hljs","1"),document.head.appendChild(t)}let hljsReadyPromise=null;function ensureHighlightJs(){return window.hljs?Promise.resolve(window.hljs):(hljsReadyPromise||(hljsReadyPromise=new Promise(((e,t)=>{const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/highlight.min.js",n.async=!0,n.onload=()=>e(window.hljs),n.onerror=()=>t(new Error("√âchec de chargement de highlight.js")),document.head.appendChild(n)}))),hljsReadyPromise)}async function highlightIn(e=document){try{ensureHighlightCss();const t=await ensureHighlightJs();if(!t)return;e.querySelectorAll("pre code").forEach((e=>{t.highlightElement(e)}))}catch(e){console.error("Erreur highlight.js :",e)}}